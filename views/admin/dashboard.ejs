<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>

<div class="admin-dashboard">
    <!-- Admin Header -->
    <div class="admin-header">
        <div class="admin-header-content">
            <h1 class="admin-title">
                <svg class="admin-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                Admin Dashboard
                <% if (typeof databaseConnected !== 'undefined') { %>
                    <span class="db-status <%= databaseConnected ? 'connected' : 'disconnected' %>">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="currentColor"/>
                        </svg>
                        <%= databaseConnected ? 'DB Connected' : 'DB Offline' %>
                    </span>
                <% } %>
            </h1>
            <% if (typeof error !== 'undefined' && error) { %>
                <div class="error-banner">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        <path d="M15 9L9 15M9 9L15 15" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <%= error %>
                </div>
            <% } %>
            <div class="admin-stats">
                <div class="stat-card">
                    <span class="stat-number"><%= stats.activeClients %></span>
                    <span class="stat-label">Active Clients</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number"><%= stats.totalMessages %></span>
                    <span class="stat-label">Total Messages</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number"><%= stats.newSignups %></span>
                    <span class="stat-label">New Signups</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Navigation Tabs -->
    <div class="admin-nav-tabs">
        <div class="admin-nav-left">
            <button class="tab-btn active" data-tab="clients">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2"/>
                    <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                    <path d="M20 8V14" stroke="currentColor" stroke-width="2"/>
                    <path d="M23 11H17" stroke="currentColor" stroke-width="2"/>
                </svg>
                Client Management
            </button>
            <button class="tab-btn" data-tab="messages">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                Messages
            </button>
            <button class="tab-btn" data-tab="monitoring">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M9 19V6L16 12L9 19Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                Activity Monitoring
            </button>
            <button class="tab-btn" data-tab="files">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                </svg>
                File Management
            </button>
            <button class="tab-btn" data-tab="performance">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 20V10" stroke="currentColor" stroke-width="2"/>
                    <path d="M18 20V4" stroke="currentColor" stroke-width="2"/>
                    <path d="M6 20V16" stroke="currentColor" stroke-width="2"/>
                </svg>
                Automation
            </button>
            <button class="tab-btn" data-tab="api-settings">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 15V12M12 12V9M12 12H9M12 12H15" stroke="currentColor" stroke-width="2"/>
                    <path d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                API Settings
            </button>
        </div>
        
        <div class="admin-nav-right">
            <button class="logout-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2"/>
                    <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2"/>
                    <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2"/>
                </svg>
                Logout
            </button>
        </div>
    </div>

    <!-- Tab Content -->
    <div class="admin-content">
        <!-- Client Management Tab -->
        <div class="tab-content active" id="clients">
            <div class="content-header">
                <h2>Client Management</h2>
                <div class="search-filter">
                    <input type="text" placeholder="Search clients..." class="search-input" autocomplete="off">
                    <select class="filter-select">
                        <option value="all">All Clients</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="pending_verification">New</option>
                    </select>
                </div>
            </div>
            
            <div class="clients-grid">
                <% if (clients && clients.length > 0) { %>
                    <% clients.forEach((client, index) => { %>
                        <div class="client-card">
                            <div class="client-header">
                                <div class="client-avatar">
                                    <%= client.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) %>
                                </div>
                                <div class="client-info">
                                    <h3><%= client.name %></h3>
                                    <span class="client-email"><%= client.email %></span>
                                    <span class="client-status <%= client.status %>"><%= client.status.charAt(0).toUpperCase() + client.status.slice(1) %></span>
                                </div>
                                <div class="client-actions">
                                    <button class="action-btn view-btn" onclick="viewClientDetails('<%= client.clientId %>')">View</button>
                                    <button class="action-btn message-btn" onclick="openClientChat('<%= client.clientId %>')">Message</button>
                                    <button class="action-btn delete-btn" onclick="confirmDeleteClient('<%= client.clientId %>', '<%= client.name %>')">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        Delete
                                    </button>
                                </div>
                            </div>
                            <div class="client-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Platforms</span>
                                    <span class="stat-value"><%= client.credentials?.length || 0 %></span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Files</span>
                                    <span class="stat-value"><%= client.uploadedFiles?.length || 0 %></span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Last Active</span>
                                    <span class="stat-value">
                                        <% if (client.lastLogin) { %>
                                            <%= new Date(client.lastLogin).toLocaleDateString() %>
                                        <% } else { %>
                                            Never
                                        <% } %>
                                    </span>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="no-clients">
                        <p>No clients found. Clients will appear here when they sign up.</p>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Messages Tab -->
        <div class="tab-content" id="messages">
            <div class="content-header">
                <h2>Client Messages</h2>
            </div>
            
            <div class="messages-layout">
                <div class="clients-list">
                    <% if (clients && clients.length > 0) { %>
                        <% clients.forEach((client, index) => { %>
                            <div class="client-item <%= index === 0 ? 'active' : '' %>" data-client-id="<%= client.clientId %>" onclick="selectClient('<%= client.clientId %>')">
                                <div class="client-avatar">
                                    <%= client.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) %>
                                </div>
                                <div class="client-details">
                                    <h4><%= client.name %></h4>
                                    <p class="last-message">
                                        <% if (client.activityLogs && client.activityLogs.length > 0) { %>
                                            <%= client.activityLogs[client.activityLogs.length - 1].message.substring(0, 50) %>...
                                        <% } else { %>
                                            No messages yet
                                        <% } %>
                                    </p>
                                    <span class="message-time">
                                        <% if (client.activityLogs && client.activityLogs.length > 0) { %>
                                            <%= new Date(client.activityLogs[client.activityLogs.length - 1].timestamp).toLocaleDateString() %>
                                        <% } else { %>
                                            --
                                        <% } %>
                                    </span>
                                </div>
                                <% if (client.activityLogs && client.activityLogs.filter(log => log.type === 'info').length > 0) { %>
                                    <div class="unread-badge"><%= client.activityLogs.filter(log => log.type === 'info').length %></div>
                                <% } %>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="no-clients-message">
                            <p>No clients available for messaging</p>
                        </div>
                    <% } %>
                </div>
                
                <div class="chat-area">
                    <% if (clients && clients.length > 0) { %>
                        <div class="chat-header">
                            <div class="chat-client-info">
                                <div class="client-avatar">
                                    <%= clients[0].name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) %>
                                </div>
                                <div>
                                    <h3><%= clients[0].name %></h3>
                                    <span class="client-status"><%= clients[0].status === 'active' ? 'Online' : 'Offline' %></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-messages" id="chat-messages">
                            <% if (clients[0].activityLogs && clients[0].activityLogs.length > 0) { %>
                                <% clients[0].activityLogs.slice(-5).forEach(log => { %>
                                    <div class="message admin-message">
                                        <div class="message-content">
                                            <p><%= log.message %></p>
                                            <span class="message-time"><%= new Date(log.timestamp).toLocaleTimeString() %></span>
                                        </div>
                                    </div>
                                <% }); %>
                            <% } else { %>
                                <div class="no-messages">
                                    <p>No conversation history. Start by sending a message below.</p>
                                </div>
                            <% } %>
                        </div>
                    <% } else { %>
                        <div class="no-client-selected">
                            <p>No clients available to chat with</p>
                        </div>
                    <% } %>
                    
                    <div class="chat-input">
                        <input type="text" placeholder="Type your message..." class="message-input">
                        <button class="send-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2"/>
                                <polygon points="22,2 15,22 11,13 2,9" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Monitoring Tab -->
        <div class="tab-content" id="monitoring">
            <div class="content-header">
                <h2>Activity Monitoring Control</h2>
                <div class="header-actions">
                    <button class="secondary-btn" onclick="openFileSender()">Send File</button>
                </div>
            </div>
            
            <div class="monitoring-panel">
                <div class="activity-controls">
                    <h3>Update Client Activity Monitor</h3>
                    <form class="activity-form">
                        <div class="form-group">
                            <label>Select Client</label>
                            <select class="form-control" id="activity-client-selector">
                                <option value="">Select Client</option>
                                <% if (clients && clients.length > 0) { %>
                                    <% clients.forEach(client => { %>
                                        <option value="<%= client.clientId %>"><%= client.name %></option>
                                    <% }); %>
                                <% } %>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Activity Status</label>
                            <select class="form-control">
                                <option>Running</option>
                                <option>Paused</option>
                                <option>Completed</option>
                                <option>Error</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Progress Percentage</label>
                            <input type="range" min="0" max="100" value="75" class="progress-slider">
                            <span class="progress-value">75%</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Status Message</label>
                            <textarea class="form-control" rows="3" placeholder="Enter status message for client...">Platform integration in progress. Estimated completion in 2 hours.</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Next Update</label>
                            <input type="datetime-local" class="form-control">
                        </div>
                        
                        <button type="submit" class="primary-btn">Update Client Monitor</button>
                    </form>
                </div>
                
                <div class="activity-preview">
                    <h3>Live Preview - Client View</h3>
                    <div class="monitor-preview">
                        <% if (clients && clients.length > 0 && clients[0].activityLogs && clients[0].activityLogs.length > 0) { %>
                            <% const latestActivity = clients[0].activityLogs[clients[0].activityLogs.length - 1]; %>
                            <div class="activity-item">
                                <div class="activity-icon <%= latestActivity.status || 'running' %>">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                        <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="activity-details">
                                    <h4><%= latestActivity.activity %></h4>
                                    <p><%= latestActivity.details || 'Activity in progress' %></p>
                                    <% if (latestActivity.platform) { %>
                                        <p><strong>Platform:</strong> <%= latestActivity.platform %></p>
                                    <% } %>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span class="activity-time">Updated <%= new Date(latestActivity.timestamp).toLocaleString() %></span>
                                </div>
                            </div>
                        <% } else { %>
                            <div class="activity-item">
                                <div class="activity-icon pending">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="activity-details">
                                    <h4>No Active Process</h4>
                                    <p>No automation processes are currently running for this client.</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="activity-time">Waiting for activity</span>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

        <!-- File Management Tab -->
        <div class="tab-content" id="files">
            <div class="content-header">
                <h2>Client Files Management</h2>
                <select class="client-selector" id="files-client-selector">
                    <option value="">Select Client</option>
                    <% if (clients && clients.length > 0) { %>
                        <% clients.forEach(client => { %>
                            <option value="<%= client.clientId %>"><%= client.name %></option>
                        <% }); %>
                    <% } %>
                </select>
            </div>
            
            <div class="files-grid" id="files-grid">
                <% if (clients && clients.length > 0 && clients[0].uploadedFiles && clients[0].uploadedFiles.length > 0) { %>
                    <div class="file-category">
                        <h3>Uploaded Files</h3>
                        <div class="files-list">
                            <% clients[0].uploadedFiles.forEach(file => { %>
                                <div class="file-item">
                                    <div class="file-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
                                        </svg>
                                    </div>
                                    <div class="file-info">
                                        <h4><%= file.originalName %></h4>
                                        <p><%= (file.fileSize / 1024).toFixed(2) %> KB • <%= new Date(file.uploadDate).toLocaleDateString() %></p>
                                    </div>
                                    <div class="file-actions">
                                        <button class="action-btn" onclick="viewFile('<%= file._id %>', '<%= file.originalName %>')">View</button>
                                        <button class="action-btn" onclick="downloadFile('<%= file._id %>', '<%= file.originalName %>')">Download</button>
                                        <button class="action-btn delete-btn" onclick="deleteFile('<%= file._id %>', '<%= file.originalName %>')">Delete</button>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                <% } else { %>
                    <div class="no-files">
                        <p>No files uploaded yet. Files will appear here when clients upload them.</p>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Campaign Performance Tab -->
        <div class="tab-content" id="performance">
            <div class="content-header">
                <h2>Update Campaign Performance</h2>
            </div>
            <div class="performance-form">
                <div class="form-group">
                    <label>Select Client</label>
                    <select class="form-control" id="performance-client-selector">
                        <option value="">Select a client...</option>
                        <% if (clients && clients.length > 0) { %>
                            <% clients.forEach(client => { %>
                                <option value="<%= client.clientId %>"><%= client.name %></option>
                            <% }); %>
                        <% } %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Select Campaign</label>
                    <select class="form-control" id="performance-campaign-selector" disabled>
                        <option value="">Select a campaign...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>PhantomBuster Agent ID</label>
                    <input type="text" id="phantombuster-agent-id" class="form-control" placeholder="Enter the PhantomBuster Agent ID...">
                </div>
                <button class="primary-btn" onclick="fetchAndUpdatePerformance()">Fetch & Update Performance</button>
            </div>
        </div>

        <!-- API Settings Tab -->
        <div class="tab-content" id="api-settings">
            <div class="content-header">
                <h2>API Settings</h2>
            </div>
            <div class="api-settings-form">
                <div class="form-group">
                    <label for="phantombuster-api-key">PhantomBuster API Key</label>
                    <input type="password" id="phantombuster-api-key" class="form-control">
                </div>
                <button class="primary-btn" onclick="saveApiKey()">Save API Key</button>
            </div>
        </div>
    </div>
</div>

<!-- Client Details Modal -->
<div class="modal" id="clientDetailsModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Client Details</h2>
            <button class="close-btn" onclick="closeModal('clientDetailsModal')">&times;</button>
        </div>
        <div class="modal-body">
            <div class="client-detail-tabs">
                <button class="detail-tab-btn active" data-tab="overview">Overview</button>
                <button class="detail-tab-btn" data-tab="platforms">Platforms</button>
                <button class="detail-tab-btn" data-tab="credentials">Credentials</button>
                <button class="detail-tab-btn" data-tab="configurations">Configurations</button>
            </div>
            
            <div class="detail-tab-content active" id="overview">
                <div class="client-overview">
                    <div class="overview-card">
                        <h3>Client Information</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Name:</label>
                                <span>John Doe</span>
                            </div>
                            <div class="info-item">
                                <label>Email:</label>
                                <span>john.doe@email.com</span>
                            </div>
                            <div class="info-item">
                                <label>Joined:</label>
                                <span>2 months ago</span>
                            </div>
                            <div class="info-item">
                                <label>Status:</label>
                                <span class="status-badge active">Active</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="detail-tab-content" id="platforms">
                <div class="platforms-list">
                    <div class="platform-item">
                        <h4>Facebook Business</h4>
                        <p>Status: Connected</p>
                        <span class="platform-status connected">●</span>
                    </div>
                    <div class="platform-item">
                        <h4>Google Ads</h4>
                        <p>Status: Connected</p>
                        <span class="platform-status connected">●</span>
                    </div>
                    <div class="platform-item">
                        <h4>Instagram Business</h4>
                        <p>Status: Pending</p>
                        <span class="platform-status pending">●</span>
                    </div>
                </div>
            </div>
            
            <div class="detail-tab-content" id="credentials">
                <div class="credentials-list">
                    <div class="credential-item">
                        <h4>Facebook API Key</h4>
                        <p>Status: Valid</p>
                        <button class="action-btn">View</button>
                    </div>
                    <div class="credential-item">
                        <h4>Google OAuth Token</h4>
                        <p>Status: Valid</p>
                        <button class="action-btn">View</button>
                    </div>
                </div>
            </div>
            
            <div class="detail-tab-content" id="configurations">
                <div class="config-list">
                    <div class="config-item">
                        <h4>Automation Schedule</h4>
                        <p>Daily at 9:00 AM</p>
                    </div>
                    <div class="config-item">
                        <h4>Target Audience</h4>
                        <p>Business professionals, 25-45 years</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- File Sender Modal -->
<div class="modal" id="fileSenderModal" style="display: none;">
    <div class="modal-content file-sender-modal">
        <div class="modal-header">
            <h2>Send File to Client</h2>
            <button class="close-btn" onclick="closeModal('fileSenderModal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="fileSenderForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="clientSelect">Select Client:</label>
                    <select id="clientSelect" name="clientId" required>
                        <option value="">Choose a client...</option>
                        <% if (clients && clients.length > 0) { %>
                            <% clients.forEach(client => { %>
                                <option value="<%= client.clientId %>"><%= client.name %> (<%= client.email %>)</option>
                            <% }); %>
                        <% } %>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="fileInput">Select File:</label>
                    <div class="file-input-wrapper">
                        <input type="file" id="fileInput" name="file" required>
                        <div class="file-input-display">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span id="fileInputText">Click to select file or drag & drop</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="fileMessage">Message (Optional):</label>
                    <textarea id="fileMessage" name="message" placeholder="Add a message with this file..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="fileCategory">File Category:</label>
                    <select id="fileCategory" name="category">
                        <option value="document">Document</option>
                        <option value="template">Template</option>
                        <option value="report">Report</option>
                        <option value="instruction">Instruction</option>
                        <option value="data">Data File</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeModal('fileSenderModal')">Cancel</button>
            <button class="btn-primary" onclick="sendFileToClient()">
                <i class="fas fa-paper-plane"></i>
                Send File
            </button>
        </div>
    </div>
</div>

<!-- Delete Client Confirmation Modal -->
<div class="modal" id="deleteClientModal">
    <div class="modal-content delete-modal">
        <div class="modal-header">
            <h2>⚠️ Delete Client Account</h2>
            <button class="close-btn" onclick="closeModal('deleteClientModal')">&times;</button>
        </div>
        <div class="modal-body">
            <div class="delete-warning">
                <div class="warning-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 8V12" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 16H12.01" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <h3>This action cannot be undone!</h3>
                <p>You are about to permanently delete the client account for:</p>
                <div class="client-to-delete">
                    <strong id="deleteClientName"></strong>
                    <span id="deleteClientEmail"></span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeModal('deleteClientModal')">Cancel</button>
            <button class="btn-danger" id="confirmDeleteBtn" onclick="deleteClient()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M3 6H5H21" stroke="currentColor" stroke-width="2"/>
                    <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M10 11V17" stroke="currentColor" stroke-width="2"/>
                    <path d="M14 11V17" stroke="currentColor" stroke-width="2"/>
                </svg>
                Delete Client Forever
            </button>
        </div>
    </div>
</div>

<script src="/js/admin.js"></script>

</body>
</html>
